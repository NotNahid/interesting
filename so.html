<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced JS Browser Forensics</title>
    <style>
        :root {
            --bg: #0f0f0f;
            --card-bg: #1a1a1a;
            --text: #e0e0e0;
            --accent: #00ff41; /* Hacker green */
            --danger: #ff3333;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Courier New', Courier, monospace;
            padding: 20px;
            line-height: 1.6;
        }

        h1 {
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid #333;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .card h3 {
            color: var(--accent);
            margin-top: 0;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #333;
            padding: 5px 0;
            font-size: 0.9em;
        }

        .data-row span:last-child {
            color: #fff;
            font-weight: bold;
            text-align: right;
        }

        .fingerprint-box {
            word-break: break-all;
            font-size: 0.8em;
            color: var(--danger);
            background: #000;
            padding: 10px;
            border: 1px solid var(--danger);
            margin-top: 10px;
        }

        button {
            background: var(--accent);
            color: #000;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            font-family: inherit;
        }

        button:hover {
            opacity: 0.8;
        }

        .status-badge {
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 4px;
            background: #333;
        }
    </style>
</head>
<body>

    <h1>Browser Reconnaissance Tool</h1>
    <p>This page demonstrates what data allows itself to be read via JavaScript immediately upon loading, often without specific permissions.</p>

    <div class="grid">
        <div class="card">
            <h3>HARDWARE IDENTITY</h3>
            <div id="hardware-data"></div>
        </div>

        <div class="card">
            <h3>NETWORK & LOCATION</h3>
            <div id="network-data"></div>
        </div>

        <div class="card">
            <h3>BROWSER FINGERPRINT</h3>
            <div id="browser-data"></div>
            <div class="fingerprint-box" id="canvas-hash">Calculating Canvas Hash...</div>
        </div>

        <div class="card">
            <h3>BATTERY & SENSORS</h3>
            <div id="sensor-data"></div>
        </div>
    </div>

    <button onclick="getIP()">Reveal Public IP (External Request)</button>

    <script>
        // 1. HARDWARE CONCURRENCY & MEMORY
        function getHardwareInfo() {
            const data = [
                { label: "CPU Cores", value: navigator.hardwareConcurrency || "Unknown" },
                { label: "RAM (approx GB)", value: navigator.deviceMemory || "Unknown (Firefox hides this)" },
                { label: "Screen Res", value: `${window.screen.width}x${window.screen.height}` },
                { label: "Color Depth", value: `${window.screen.colorDepth}-bit` },
                { label: "Pixel Ratio", value: window.devicePixelRatio },
                { label: "Touch Points", value: navigator.maxTouchPoints > 0 ? navigator.maxTouchPoints : "None" }
            ];
            renderData('hardware-data', data);
        }

        // 2. NETWORK INFO
        function getNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            const data = [
                { label: "Online Status", value: navigator.onLine ? "Online" : "Offline" },
                { label: "Connection Type", value: connection ? connection.effectiveType : "Hidden" },
                { label: "Downlink Speed", value: connection ? `~${connection.downlink} Mbps` : "Hidden" },
                { label: "RTT (Ping)", value: connection ? `${connection.rtt} ms` : "Hidden" },
                { label: "Timezone", value: Intl.DateTimeFormat().resolvedOptions().timeZone },
                { label: "Language", value: navigator.language }
            ];
            renderData('network-data', data);
        }

        // 3. CANVAS FINGERPRINTING (The "Invisible Cookie")
        function getCanvasFingerprint() {
            // We create a canvas element but never add it to the DOM (it's invisible)
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // We draw complex shapes and text. Every GPU renders these slightly differently.
            ctx.textBaseline = "top";
            ctx.font = "14px 'Arial'";
            ctx.textBaseline = "alphabetic";
            ctx.fillStyle = "#f60";
            ctx.fillRect(125,1,62,20);
            ctx.fillStyle = "#069";
            ctx.fillText("Hello World", 2, 15);
            ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
            ctx.fillText("Hello World", 4, 17);

            // Convert the drawing to a Base64 string
            const dataURI = canvas.toDataURL();
            
            // Simple hash function to turn that long string into a short ID
            let hash = 0;
            for (let i = 0; i < dataURI.length; i++) {
                const char = dataURI.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            
            document.getElementById('canvas-hash').innerHTML = `<strong>Unique Machine ID (Hash):</strong><br>${hash}`;
            
            const browserData = [
                { label: "User Agent", value: navigator.userAgent.substring(0, 30) + "..." },
                { label: "Platform", value: navigator.platform },
                { label: "Cookies Enabled", value: navigator.cookieEnabled },
                { label: "Do Not Track", value: navigator.doNotTrack || "Unspecified" }
            ];
            renderData('browser-data', browserData);
        }

        // 4. BATTERY STATUS API
        function getBatteryInfo() {
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    const data = [
                        { label: "Battery Level", value: `${Math.round(battery.level * 100)}%` },
                        { label: "Charging", value: battery.charging ? "Yes âš¡" : "No" },
                        { label: "Charge Time", value: battery.chargingTime === Infinity ? "Unknown" : `${battery.chargingTime}s` }
                    ];
                    renderData('sensor-data', data);
                });
            } else {
                renderData('sensor-data', [{ label: "Battery API", value: "Not Supported/Blocked" }]);
            }
        }

        // 5. IP ADDRESS (Requires external fetch, simulating a "Call Home")
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const json = await response.json();
                alert(`Your Public IP is: ${json.ip}`);
            } catch (e) {
                alert("Could not fetch IP (Adblocker might be active)");
            }
        }

        // Helper function to render HTML
        function renderData(elementId, dataArray) {
            const container = document.getElementById(elementId);
            container.innerHTML = dataArray.map(item => `
                <div class="data-row">
                    <span>${item.label}</span>
                    <span>${item.value}</span>
                </div>
            `).join('');
        }

        // Initialize all
        getHardwareInfo();
        getNetworkInfo();
        getCanvasFingerprint();
        getBatteryInfo();

        // 6. VISIBILITY API TRAP
        // Logs to console if you switch tabs
        document.addEventListener("visibilitychange", () => {
            if (document.hidden) {
                document.title = "I SEE YOU LEFT! ðŸ˜¡";
                console.log("%c User switched tabs at " + new Date().toLocaleTimeString(), "color:red; font-size:16px; font-weight:bold;");
            } else {
                document.title = "Welcome Back ðŸ˜‡";
            }
        });

    </script>
</body>
</html>